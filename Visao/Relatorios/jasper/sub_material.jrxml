<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sub_material" language="groovy" pageWidth="595" pageHeight="842" columnWidth="595" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="e79703a3-6650-4fa1-b406-e8ef1315d6ea">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="P_NM_ID" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select concat(LPAD(m.grupo,3,'0'), concat('+',m.codigo)) as grupo_codigo,
       m.descricao,
      date_format(nmat.dthora_alteracao, '%m/%Y') as mes_ano,
      m.unidade,
      nmat.quant_solicitada as qtde_solic,
      nmat.quant_fornecida as qtde_fornec,
      nmat.vlr_unitario,
      (nmat.quant_fornecida * nmat.vlr_unitario) vlr_total
from nota_mov_mat nmat, material m
where nmat.material_id = m.id and
      nmat.nota_mov_id = $P{P_NM_ID}
order by nmat.sequencia]]>
	</queryString>
	<field name="grupo_codigo" class="java.lang.String"/>
	<field name="descricao" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="mes_ano" class="java.lang.String"/>
	<field name="unidade" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="qtde_solic" class="java.math.BigDecimal"/>
	<field name="qtde_fornec" class="java.math.BigDecimal"/>
	<field name="vlr_unitario" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vlr_total" class="java.math.BigDecimal"/>
	<group name="grupo_codigo">
		<groupExpression><![CDATA[$F{grupo_codigo}]]></groupExpression>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="14" splitType="Stretch">
			<textField>
				<reportElement x="1" y="0" width="66" height="14" uuid="3ba10188-9239-4ad3-8679-f4a5da43dc79"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{grupo_codigo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="67" y="0" width="240" height="14" uuid="42cd6ed5-1e29-42c3-aee7-dc2c62e868ab"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descricao}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="307" y="0" width="30" height="14" uuid="2c9806a6-6122-4bb2-8c95-637d048269bd"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{mes_ano}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="337" y="0" width="21" height="14" uuid="33165505-53a8-4035-b85a-fb2b0f0b5f87"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{unidade}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="358" y="0" width="55" height="14" uuid="11ff3391-11ad-4f2d-a85b-862b7453b675"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{qtde_solic}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="413" y="0" width="60" height="14" uuid="30459d21-029c-4786-b70b-1f069f6ade6d"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{qtde_fornec}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="473" y="0" width="45" height="14" uuid="d80527fc-2191-433a-9738-d7b7e51fb56b"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vlr_unitario}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="518" y="0" width="49" height="14" uuid="2695c1ba-3842-4247-b237-85b8983ed027"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vlr_total}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
